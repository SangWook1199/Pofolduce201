<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
<link th:href="@{/css/board-header.css}" rel="stylesheet">
<link th:href="@{/css/page-css/mypage-myportfolio.css}" rel="stylesheet">
<link rel="stylesheet" th:href="@{/css/page-css/mypage-menu.css}" />
<title>내 이력서</title>
</head>

<div layout:fragment="content">

	<div class="mypage-mypost">
		<div class="mypage-main">
			<div
				th:replace="fragments/html/board-header :: board-header('마이페이지')"></div>
			<div class="mypage-main-side">
				<div th:replace="fragments/html/mypage-menu :: mypage-menu"></div>
				<div>

					<div class="mypage-main-container">
						<h1 id="mypage-title2">내 이력서</h1>
						<div class="row row-cols-md-3 row-cols-2 g-4">
							<div th:if="${#lists.isEmpty(portfolios)}"
								class="col-12 text-center mt-5">
								<h3 class="non-data">등록된 포트폴리오가 없습니다.</h3>
							</div>
							<!-- 이력서 썸네일 리스트 -->
							<th:block th:unless="${#lists.isEmpty(portfolios)}">
								<div class="col" th:each="portfolio : ${portfolios}">
									<div class="h-100 text-center">
										<a
											th:href="@{/mypage/myportfolio/{portfolioId}(portfolioId=${portfolio.portfolioId})}">
											<img class="card-img-top"
											th:src="@{'/uploads/portfolio/' + ${portfolio.portfolioId} + '.png'}"
											alt="썸네일" style="max-height: 300px; object-fit: cover;">
										</a>
										<div
											class="card-body d-flex justify-content-center align-items-center">
											<div class="d-flex align-items-center">
												<img th:if="${repId == portfolio.portfolioId}"
													th:src="@{/svg/crown.svg}" alt="왕관" class="crown me-1">
												<h6 class="card-title mb-0 portfolio-title"
													th:text="${portfolio.portfolioName}">포트폴리오 제목</h6>
											</div>
										</div>
									</div>
								</div>
							</th:block>
						</div>
						<!-- 이력서 업로드 버튼 -->
						<button type="button"
							class="btn rounded-pill w-100 py-2 long-button"
							data-bs-toggle="modal" data-bs-target="#resumeUploadModal">+</button>
						<!-- 이력서 업로드 모달 -->
						<div class="modal fade" id="resumeUploadModal" tabindex="-1"
							aria-labelledby="resumeUploadModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">

									<div class="modal-header">
										<h5 class="modal-title" id="resumeUploadModalLabel">이력서
											업로드</h5>
										<button type="button" class="btn-close"
											data-bs-dismiss="modal" aria-label="Close"></button>
									</div>

									<form th:action="@{/mypage/myportfolio/upload}" method="post"
										enctype="multipart/form-data">
										<div class="modal-body">
											<div class="d-flex align-items-center mb-3">
												<label class="me-2" style="min-width: 130px;">제목을
													입력하세요.</label> <input type="text" name="portfolioName"
													class="form-control flex-grow-1" required>
											</div>
											<input type="file" name="file" accept="application/pdf"
												class="form-control" required>
										</div>

										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"
												data-bs-dismiss="modal">취소</button>
											<button type="submit" class="btn btn-primary">확인</button>
										</div>
									</form>

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function() {
			if ('[[${successMessage}]]') {
				alert('[[${successMessage}]]');
			}
			if ('[[${errorMessage}]]') {
				alert('[[${errorMessage}]]');
			}
		});
	</script>
</div>
</html>